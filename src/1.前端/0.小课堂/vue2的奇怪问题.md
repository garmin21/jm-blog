---
title: vue2ä¸­æ·±å…¥åŸç†-ä¿®æ”¹å“åº”å¼æ•°æ®
createTime: 2025/04/27 18:18:30
permalink: /article/m8xpks8j/
author: æå˜‰æ˜
tags:
  - å°è¯¾å ‚
---

### æ•°ç»„

é—®é¢˜ï¼šæ•°ç»„æ˜¯å¦å¯ä»¥é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼å»ä¿®æ”¹ï¼Ÿ

> mounted ä¸­ä¸èƒ½ï¼Œvue2 ä¸æ”¯æŒï¼Œå› ä¸º object.defineProperty å¤„ç†éº»çƒ¦ï¼Œéœ€è¦å¯¹æ¯ä¸€ä¸ªå±æ€§è¿›è¡Œget/set çš„è®¾ç½®ã€‚é‚£ä¹ˆæ•°ç»„æœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼Œå°±æœ‰å¤šå°‘å¯¹get/set ååˆ†æ¶ˆè€—æ€§èƒ½ï¼Œå¹¶ä¸”å¯¹æ•°ç»„çš„æ”¯æŒä¸å¤Ÿå®Œæ•´ï¼Œlength ä¸æ”¯æŒæ‹¦æˆªï¼Œ æ‰€ä»¥ vue2 æä¾› $set / å¹¶ä¸”é‡å†™äº†ä¸€äº›æ•°ç»„çš„æ–¹æ³• çš„æ–¹å¼å»ä¿®æ”¹

```vue
<template>
  <h1>{{ arr }}</h1>
</template>
<script>
export default {
  data() {
    return {
      arr: [0, 1, 2, 3, 4],
    };
  },
  beforeCreate() {
    // âŒ ä¸å¯ä»¥ä¿®æ”¹ åˆ›å»ºä¹‹å‰ æ­¤æ—¶ data è¿˜æ²¡å‡†å¤‡å¥½, æ— æ³•è®¿é—®åˆ°æ•°ç»„ä¸‹æ ‡æ•°æ®
    this.arr[0] = 9;
  },
  created() {
    // âœ… å¯ä»¥ä¿®æ”¹ï¼Œæ­¤æ—¶åˆ›å»ºå®Œæˆï¼Œå“åº”å¼æ•°æ®å‡†å¤‡å¥½äº† å¯ä»¥ç›´æ¥ä¿®æ”¹
    this.arr[0] = 9;
  },
  beforeMount() {
    // âœ… å¯ä»¥ä¿®æ”¹ è™šæ‹Ÿdom æ¸²æŸ“ä¹‹å‰ï¼Œè·Ÿ created ä¸€æ ·å¯ä»¥ä¿®æ”¹
    this.arr[0] = 9;
  },
  mounted() {
    // âŒ æ— æ³•ä¿®æ”¹ é¡µé¢å·²ç»æ¸²æŸ“å®Œæˆï¼Œæ­¤æ—¶çš„ä¿®æ”¹æ“ä½œï¼Œæ˜¯ä¸è¢«vue2 å…è®¸çš„
    this.arr[0] = 9;

    // âœ… ç›´æ¥è¦†ç›–äº†
    this.arr = [3,4,5]
  },
};
</script>
```

### å¯¹è±¡

é—®é¢˜ï¼šmounted é’©å­ä¸­æ–°å¢å±æ€§æ˜¯å¦å¯ä»¥å¼•èµ·é¡µé¢å˜åŒ–

> ä¸ä¼šï¼Œå› ä¸º æ–°å¢çš„å±æ€§ä¸ä¼šè§¦å‘ object.defineProperty çš„ set/get è‡ªç„¶ä¹Ÿæ— æ³•è½¬å˜ä¸ºå“åº”å¼çš„å±æ€§ï¼Œé¡µé¢ä¹Ÿä¸ä¼šåšå‡ºå“åº”




## vue3 ä¸­ ref reactive ä¸ºä»€ä¹ˆæ”¯æŒåœ¨ mounted æ—¶å»ä¿®æ”¹


```vue
<script setup>
import { ref, reactive } from 'vue';

// setup ğŸŸ° beforeCreate + created
const obs = reactive({});
const arr = ref([1, 2, 3, 4]);

// âœ…
arr.value[0] = 90;

setTimeout(() => {
  // âœ…
  arr.value[1] = 190;
}, 4000);

onMounted(() => {
  // âœ…
  arr.value[1] = 1000;
  obs.name = 'jack'
})

</script>

<template>
  <h1>{{ obs }}</h1>
  <h1>{{ arr }}</h1>
</template>
```


å› ä¸ºvue3 ä½¿ç”¨äº† proxy APIï¼Œ` proxy `è¿”å›çš„ä»£ç†å¯¹è±¡ï¼Œæ”¯æŒ åŠ¨æ€å±æ€§çš„ getter/setter, è€Œ `Object.defineProperty` éœ€è¦å¯¹æ¯ä¸€ä¸ªå±æ€§ å•ç‹¬å®šä¹‰ getter/setter ã€‚æ–°å¢åˆ é™¤åŠ¨æ€å±æ€§ä¹Ÿä¸ä¼šè§¦å‘getter/setter
