Old space是 V8 托管（也称为垃圾收集）堆（即 JavaScript 对象所在的位置）中最大和最可配置的部分，而 --max-old-space-size 标志控制其最大大小。 随着内存消耗接近极限，V8 将花费更多时间在垃圾收集上，以释放未使用的内存。

如果堆内存消耗（即 GC 无法释放的活动对象）超过限制，V8 将使您的进程崩溃（因为缺乏替代方案），因此您不想将其设置得太低。 当然，如果您将其设置得太高，那么 V8 将允许的额外堆使用可能会导致您的整个系统内存不足（并且由于缺乏替代方案而交换或终止随机进程）。

总之，在具有 2GB 内存的机器上，我可能会将 --max-old-space-size 设置为大约 1.5GB 以留出一些内存用于其他用途并避免交换。

设置环境变量
------

NODE\_OPTIONS --max-old-space-size 环境变量允许增加节点的最大堆大小。

设置环境变量允许 Node 从您的环境中读取此值，因此我们不需要在每次运行 Node 命令时将此值作为参数传递。 这被设置为一个全局值，并且可以被每个 Node 进程使用。

使用下列命令行设置环境变量：

值8192表示8192MB

```bash
export NODE_OPTIONS="--max-old-space-size=8192"
```

本文转自 <https://www.cnblogs.com/wangguanjia/p/16386272.html>，如有侵权，请联系删除。