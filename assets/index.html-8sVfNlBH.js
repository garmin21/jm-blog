import{_ as t,c as o,a as l,o as r}from"./app-mFxSxjJK.js";const p={};function i(n,e){return r(),o("div",null,e[0]||(e[0]=[l('<p>ä¸Šç¯‡ï¼š <a href="https://juejin.cn/post/7053998924071174175" title="https://juejin.cn/post/7053998924071174175" target="_blank" rel="noopener noreferrer">webpack æ‰“åŒ…äº§ç‰©è§£æåŠåŸç†ï¼ˆå« cjs/esm/ä»£ç åˆ†ç¦»/æ‡’åŠ è½½ï¼‰</a></p><h2 id="rollup-å®šä½" tabindex="-1"><a class="header-anchor" href="#rollup-å®šä½"><span>rollup å®šä½</span></a></h2><p>rollup æ¯” webpack æ™šå‡º 2 å¹´ï¼Œå¯¹æ¯” webpack è‚¯å®šæ˜¯æœ‰å·®å¼‚åŒ–çš„</p><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å®˜ç½‘<a href="https://link.juejin.cn?target=https%3A%2F%2Frollupjs.org%2Fguide%2Fen%2F%23overview" title="https://rollupjs.org/guide/en/#overview" target="_blank" rel="noopener noreferrer">rollupjs.org/guide/en/#oâ€¦</a></p><p>å¾—åˆ°ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹</p><ol><li>å»ºè®®å¼€å‘è€…ä½¿ç”¨ esm å†™æ¨¡å—ã€‚ <ol><li>ä½¿ç”¨ esm æ¨¡å—çš„å¥½å¤„å°±å¾ˆå¤šäº†ï¼šï¼ˆå¯ä»¥å‚è€ƒæˆ‘å¦ä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/6959360326299025445" title="https://juejin.cn/post/6959360326299025445" target="_blank" rel="noopener noreferrer">juejin.cn/post/695936â€¦</a> ï¼‰ <ol><li>é«˜ç‰ˆæœ¬æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼ˆæµè§ˆå™¨åªæœ‰ 2 ç§æ–¹æ³•æ”¯æŒå¼•å…¥ js æ¨¡å—ï¼Œ1 æ˜¯ script æ ‡ç­¾ï¼Œ2 å°±æ˜¯ esm æ¨¡å—ï¼‰</li><li>å¯ä»¥åš tree shakingï¼ˆæ—©æœŸ webpack ç‰ˆæœ¬æ˜¯ä¸æ”¯æŒ tree shaking çš„ï¼‰</li><li>å¯ä»¥è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜</li></ol></li></ol></li><li>esm æœ€ç»ˆå°†åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥å®ç°ï¼ˆæµè§ˆå™¨+node éƒ½å¯ä»¥ç”¨ï¼Œæ˜¯æœªæ¥çš„æ ‡å‡†ï¼‰ï¼Œä½† Rollup è®©æ‚¨ä»Šå¤©å°±å¯ä»¥å®ç°ã€‚ <ul><li>è¿™å¥è¯å¾ˆé‡è¦ï¼Œä¹Ÿæ˜¯ rollup çš„ç‰¹ç‚¹ï¼Œä¹Ÿæ˜¯è¯ç”Ÿçš„åŸå› </li><li>é‡Œé¢æœ‰å†å²åŸå› ï¼ˆè¯¦ç»†å¯ä»¥å‚è€ƒæˆ‘çš„ä¸Šç¯‡å…³äº webpack çš„ï¼‰</li><li><strong>ç®€å•çš„è¯´å°±æ˜¯ï¼šESM - ECMAScript æ¨¡å—æ˜¯æœªæ¥çš„å®˜æ–¹æ ‡å‡†å’Œä¸»æµã€‚ä½†æ˜¯æµè§ˆå™¨çš„ç‰ˆæœ¬éœ€è¦æ¯”è¾ƒé«˜ï¼Œæ¯”å¦‚ chorme éƒ½éœ€è¦ 63 ç‰ˆæœ¬ä»¥ä¸Š</strong><ul><li>æ‰€ä»¥ rollup ä¸»è¦çš„å‡ºå‘ç‚¹æ˜¯ï¼š<strong>æœªæ¥è¿˜æ²¡åˆ°ï¼Œä½† rollup å¯ä»¥è®©ä½ å…ˆå†™æœªæ¥çš„ä»£ç ï¼ˆæŒ‡ esmï¼‰</strong></li></ul></li></ul></li></ol><h2 id="rollup-ä½¿ç”¨æµç¨‹" tabindex="-1"><a class="header-anchor" href="#rollup-ä½¿ç”¨æµç¨‹"><span>rollup ä½¿ç”¨æµç¨‹</span></a></h2><p>æµè§ˆå™¨ç¯å¢ƒä½¿ç”¨çš„åº”ç”¨ç¨‹åºçš„è¯ï¼š</p><ol><li>æ— éœ€è€ƒè™‘æµè§ˆå™¨å…¼å®¹é—®é¢˜çš„è¯ <ul><li>å¼€å‘è€…å†™ esm ä»£ç  -&gt; rollup é€šè¿‡<strong>å…¥å£</strong>ï¼Œé€’å½’è¯†åˆ« esm æ¨¡å— -&gt; æœ€ç»ˆæ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundle.js -&gt; æµè§ˆå™¨ç›´æ¥å¯ä»¥æ”¯æŒå¼•å…¥<code>&lt;script type=&quot;module&quot;&gt;</code></li></ul></li><li>éœ€è€ƒè™‘æµè§ˆå™¨å…¼å®¹é—®é¢˜çš„è¯ <ul><li>å¯èƒ½ä¼šæ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦ç”¨é¢å¤–çš„ polyfill åº“ï¼Œæˆ–ç»“åˆ webpack ä½¿ç”¨</li></ul></li></ol><p>æ‰“åŒ…æˆ npm åŒ…çš„è¯ï¼š</p><ul><li>å¼€å‘è€…å†™ esm ä»£ç  -&gt; rollup é€šè¿‡<strong>å…¥å£</strong>ï¼Œé€’å½’è¯†åˆ« esm æ¨¡å— -&gt; ï¼ˆå¯ä»¥æ”¯æŒé…ç½®è¾“å‡ºå¤šç§æ ¼å¼çš„æ¨¡å—ï¼Œå¦‚ esmã€cjsã€umdã€amdï¼‰æœ€ç»ˆæ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundle.js <ul><li>ï¼ˆå¼€å‘è€…è¦å†™ cjs ä¹Ÿå¯ä»¥ï¼Œéœ€è¦æ’ä»¶@rollup/plugin-commonjsï¼‰ åˆæ­¥çœ‹æ¥</li></ul></li><li>å¾ˆæ˜æ˜¾ï¼Œrollup æ¯”è¾ƒé€‚åˆæ‰“åŒ… js åº“ï¼ˆreactã€vue ç­‰çš„æºä»£ç åº“éƒ½æ˜¯ rollup æ‰“åŒ…çš„ï¼‰æˆ– é«˜ç‰ˆæœ¬æ— éœ€å¾€ä¸‹å…¼å®¹çš„æµè§ˆå™¨åº”ç”¨ç¨‹åºï¼ˆç°åœ¨ 2022 å¹´äº†ï¼Œæ—¶é—´è¶Šå¾€åï¼Œè¿ç§»åˆ° rollup ä¼šè¶Šå¤šï¼ŒçŒœæµ‹ï¼‰</li><li>è¿™æ ·æ‰“åŒ…å‡ºæ¥çš„åº“ï¼Œå¯ä»¥å……åˆ†ä½¿ç”¨ä¸Š esm çš„ tree shakingï¼Œä½¿æºåº“ä½“ç§¯æœ€å°</li></ul><h3 id="ä¸¾ä¸ªå°-ğŸŒ°-ç®€å•çš„å¯¹æ¯”ä¸€ä¸‹-webpack-æ‰“åŒ…å’Œ-rollup-æ‰“åŒ…" tabindex="-1"><a class="header-anchor" href="#ä¸¾ä¸ªå°-ğŸŒ°-ç®€å•çš„å¯¹æ¯”ä¸€ä¸‹-webpack-æ‰“åŒ…å’Œ-rollup-æ‰“åŒ…"><span>ä¸¾ä¸ªå° ğŸŒ° ç®€å•çš„å¯¹æ¯”ä¸€ä¸‹ webpack æ‰“åŒ…å’Œ rollup æ‰“åŒ…</span></a></h3><p>æ­¤ demo æ˜¯çº¯ esm çš„å†™æ³•</p><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>// å…¥å£mainã€‚js import { b } from &#39;./test/a&#39; console.log(b + 1) console.log(1111) // &#39;./test/a&#39; export const b = &#39;xx&#39; export const bbbbbbb = &#39;xx&#39;</code></p><p>rollup æ‰“åŒ…æ•ˆæœï¼ˆéå¸¸å¹²å‡€ï¼Œæ— æ³¨å…¥ä»£ç ï¼‰</p><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>const b = &#39;xx&#39;; console.log(b + 1); console.log(1111);</code></p><p>webpack æ‰“åŒ…æ•ˆæœï¼ˆæœ‰å¾ˆå¤šæ³¨å…¥ä»£ç ï¼‰</p><ul><li>å®é™…ä¸Šï¼Œæˆ‘ä»¬è‡ªå·±å†™çš„ä»£ç åœ¨æœ€ä¸‹é¢ã€‚ä¸Šé¢æ³¨å…¥çš„å¤§æ®µä»£ç  éƒ½æ˜¯<strong>webpack è‡ªå·±çš„å…¼å®¹ä»£ç </strong>ï¼Œ<strong>ç›®çš„æ˜¯è‡ªå·±å®ç° requireï¼Œmodules.exportsï¼Œexportï¼Œè®©æµè§ˆå™¨å¯ä»¥å…¼å®¹ cjs å’Œ esm è¯­æ³•</strong></li><li>ï¼ˆå¯ä»¥ç†è§£ä¸ºï¼Œ<strong>webpack è‡ªå·±å®ç° polyfill æ”¯æŒæ¨¡å—è¯­æ³•ï¼Œrollup æ˜¯åˆ©ç”¨é«˜ç‰ˆæœ¬æµè§ˆå™¨åŸç”Ÿæ”¯æŒ esm(æ‰€ä»¥ rollup æ— éœ€ä»£ç æ³¨å…¥)</strong>ï¼‰</li></ul><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>/******/ (function(modules) { // webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if(installedModules[moduleId]) { /******/ return installedModules[moduleId].exports; /******/ } /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ i: moduleId, /******/ l: false, /******/ exports: {} /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.l = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // define getter function for harmony exports /******/ __webpack_require__.d = function(exports, name, getter) { /******/ if(!__webpack_require__.o(exports, name)) { /******/ Object.defineProperty(exports, name, { enumerable: true, get: getter }); /******/ } /******/ }; /******/ /******/ // define __esModule on exports /******/ __webpack_require__.r = function(exports) { /******/ if(typeof Symbol !== &#39;undefined&#39; &amp;&amp; Symbol.toStringTag) { /******/ Object.defineProperty(exports, Symbol.toStringTag, { value: &#39;Module&#39; }); /******/ } /******/ Object.defineProperty(exports, &#39;__esModule&#39;, { value: true }); /******/ }; /******/ /******/ // create a fake namespace object /******/ // mode &amp; 1: value is a module id, require it /******/ // mode &amp; 2: merge all properties of value into the ns /******/ // mode &amp; 4: return value when already ns object /******/ // mode &amp; 8|1: behave like require /******/ __webpack_require__.t = function(value, mode) { /******/ if(mode &amp; 1) value = __webpack_require__(value); /******/ if(mode &amp; 8) return value; /******/ if((mode &amp; 4) &amp;&amp; typeof value === &#39;object&#39; &amp;&amp; value &amp;&amp; value.__esModule) return value; /******/ var ns = Object.create(null); /******/ __webpack_require__.r(ns); /******/ Object.defineProperty(ns, &#39;default&#39;, { enumerable: true, value: value }); /******/ if(mode &amp; 2 &amp;&amp; typeof value != &#39;string&#39;) for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key)); /******/ return ns; /******/ }; /******/ /******/ // getDefaultExport function for compatibility with non-harmony modules /******/ __webpack_require__.n = function(module) { /******/ var getter = module &amp;&amp; module.__esModule ? /******/ function getDefault() { return module[&#39;default&#39;]; } : /******/ function getModuleExports() { return module; }; /******/ __webpack_require__.d(getter, &#39;a&#39;, getter); /******/ return getter; /******/ }; /******/ /******/ // Object.prototype.hasOwnProperty.call /******/ __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); }; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = &quot;./&quot;; /******/ /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(__webpack_require__.s = 0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ (function(module, __webpack_exports__, __webpack_require__) { &quot;use strict&quot;; // ESM COMPAT FLAG __webpack_require__.r(__webpack_exports__); // CONCATENATED MODULE: ./src/test/a.js const b = &#39;xx&#39;; const bbbbbbb = &#39;xx&#39;; // CONCATENATED MODULE: ./src/main.js console.log(b + 1); console.log(1111); /***/ }) /******/ ]);</code></p><h2 id="ä¸¤è€…å¤„ç†æºä»£ç æ¨¡å—çš„å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#ä¸¤è€…å¤„ç†æºä»£ç æ¨¡å—çš„å¯¹æ¯”"><span>ä¸¤è€…å¤„ç†æºä»£ç æ¨¡å—çš„å¯¹æ¯”</span></a></h2><table><thead><tr><th></th><th>çº¯ esm</th><th>çº¯ cjs</th><th>ä¸¤è€…æ··ç”¨</th></tr></thead><tbody><tr><td>webpack</td><td>æ”¯æŒï¼ˆæœ‰ä»£ç æ³¨å…¥ï¼‰</td><td>æ”¯æŒï¼ˆæœ‰ä»£ç æ³¨å…¥ï¼‰</td><td>æ”¯æŒï¼ˆæœ‰ä»£ç æ³¨å…¥ï¼‰</td></tr><tr><td>rollup</td><td><strong>æ”¯æŒï¼ˆæ— æ³¨å…¥ï¼‰</strong></td><td>åŸç”Ÿä¸æ”¯æŒï¼ˆéœ€å¢åŠ æ’ä»¶@rollup/plugin-commonjsï¼‰</td><td>åŸç”Ÿä¸æ”¯æŒï¼ˆéœ€å¢åŠ æ’ä»¶@rollup/plugin-commonjsï¼‰</td></tr></tbody></table><p><strong>rollup çš„åˆè¡·ä¹Ÿæ˜¯å¸Œæœ›å¼€å‘è€…å»å†™ esmï¼Œè€Œä¸æ˜¯ cjs</strong>ã€‚å› ä¸º esm æ˜¯ javascript çš„æ–°æ ‡å‡†ï¼Œæ˜¯æœªæ¥ï¼Œæœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œé«˜ç‰ˆæœ¬æµè§ˆå™¨ä¹Ÿæ”¯æŒ</p><h2 id="ä¸¤è€…å¤„ç†å¯¹å¤–æš´éœ²æ¨¡å—-éå¸¸ä¸ä¸€æ ·-è§£é‡Š-rollup-ä¸ºä»€ä¹ˆé€‚åˆæ‰“åŒ…åº“" tabindex="-1"><a class="header-anchor" href="#ä¸¤è€…å¤„ç†å¯¹å¤–æš´éœ²æ¨¡å—-éå¸¸ä¸ä¸€æ ·-è§£é‡Š-rollup-ä¸ºä»€ä¹ˆé€‚åˆæ‰“åŒ…åº“"><span>ä¸¤è€…å¤„ç†å¯¹å¤–æš´éœ²æ¨¡å—ï¼Œéå¸¸ä¸ä¸€æ ·ï¼ï¼ï¼ˆè§£é‡Š rollup ä¸ºä»€ä¹ˆé€‚åˆæ‰“åŒ…åº“ï¼‰</span></a></h2><p>ä¸Šé¢çš„ demo <strong>åŠ ä¸Š export å¯¼å‡º</strong></p><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>// å…¥å£mainã€‚js import { b } from &#39;./test/a&#39; console.log(b + 1) console.log(1111) export { // æ–°å¢å¯¼å‡º b } // &#39;./test/a&#39; export const b = &#39;xx&#39; export const bbbbbbb = &#39;xx&#39;</code></p><p>rollup æ‰“åŒ… å¯¼å‡ºï¼ˆéå¸¸å¹²å‡€ï¼Œæ— æ³¨å…¥ä»£ç ï¼‰</p><ul><li><p>rollup æœ¬èº«ä¸å»åš polyfill</p></li><li><p>rollup çš„é…ç½®æ–‡ä»¶æ— éœ€ç‰¹æ®Šé…ç½®ï¼Œè€Œä¸”è¿˜å¯ä»¥æ”¯æŒ<strong>å¤šç§æ¨¡å—å¯¼å‡ºï¼ˆesmï¼Œcjsï¼Œumdï¼Œamdï¼‰</strong></p><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>// rollup.config.js const OUTPUT_DIR = &#39;dist&#39; const INPUT_FILE = &#39;src/main.js&#39; export default[ // esm { input: INPUT_FILE, output: { file: OUTPUT_DIR + &#39;/esm/index.js&#39;, format: &#39;esm&#39; // å¯¼å‡ºesmæ¨¡å— } }, // commonjs { input: INPUT_FILE, output: { file: OUTPUT_DIR + &#39;/cjs/index.js&#39;, format: &#39;cjs&#39; // å¯¼å‡ºcjsæ¨¡å— } }, // umd { input: INPUT_FILE, output: { file: OUTPUT_DIR + &#39;/umd/index.js&#39;, format: &#39;umd&#39; // å¯¼å‡ºumdæ¨¡å— } }, ]</code></p><p>æ‰“åŒ…çš„åˆ° esm å’Œ cjs</p><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>// esm const b = &#39;xx&#39;; console.log(b + 1); console.log(1111); export { b }; // cjs const b = &#39;xx&#39;; console.log(b + 1); console.log(1111); exports.b = b; // umd ï¼ˆå…¼å®¹3ç§å†™æ³•ï¼šcjsï¼Œamdï¼Œglobalï¼ˆglobalå¯ä»¥åˆæ­¥ç†è§£ä¸ºç›´æ¥é€šè¿‡windowä¼ å€¼ï¼‰ï¼‰ (function (global, factory) { typeof exports === &#39;object&#39; &amp;&amp; typeof module !== &#39;undefined&#39; ? factory(exports) : typeof define === &#39;function&#39; &amp;&amp; define.amd ? define([&#39;exports&#39;], factory) : (global = typeof globalThis !== &#39;undefined&#39; ? globalThis : global || self, factory(global.aa = {})); })(this, (function (exports) { &#39;use strict&#39;; const b = &#39;xx&#39;; console.log(b + 1); console.log(1111); exports.b = b; Object.defineProperty(exports, &#39;__esModule&#39;, { value: true }); }));</code></p></li></ul><p>webpack å¯¼å‡º ï¼ˆåŒºåˆ«å·¨å¤§ï¼Œæ³¨å…¥ä»£ç è¾ƒå¤šï¼Œå¯¼å‡º esm æ”¯æŒçš„ä¸å¤ªå¥½ï¼‰</p><ul><li><p>webpack éœ€é…ç½® ï¼ˆæ­¤å¤„æ˜¯ webpack 4.xï¼‰</p><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>output: { ..., library: &#39;myLib&#39;, // æš´éœ²å‡ºå»çš„å˜é‡çš„åå­— libraryTarget: &#39;commonjs&#39;, }</code></p><p>webpack æš‚æ—¶åªèƒ½æ”¯æŒå¯¼å‡º cjs æˆ– æ›´å¾€å‰å…¼å®¹çš„åŒ…(umd)</p><p><strong>ä¸æ”¯æŒ esmï¼ˆå®éªŒæ€§ï¼‰</strong> <img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf95fb883bf6493ebce867bd78534f4f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="image.png"></p><p>æˆ‘ä»¬æ­¤å¤„å¯¼å‡º cjs çš„åŒ…ï¼Œ å’Œ rollup å¯¹æ¯”ä¸€ä¸‹</p><ul><li>æ³¨å…¥ä»£ç ç‰¹åˆ«å¤šï¼Œæ¯”è¾ƒå†—ä½™</li></ul><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>exports[&quot;myLib&quot;] = /******/ (function(modules) { // webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if(installedModules[moduleId]) { /******/ return installedModules[moduleId].exports; /******/ } /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ i: moduleId, /******/ l: false, /******/ exports: {} /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.l = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // define getter function for harmony exports /******/ __webpack_require__.d = function(exports, name, getter) { /******/ if(!__webpack_require__.o(exports, name)) { /******/ Object.defineProperty(exports, name, { enumerable: true, get: getter }); /******/ } /******/ }; /******/ /******/ // define __esModule on exports /******/ __webpack_require__.r = function(exports) { /******/ if(typeof Symbol !== &#39;undefined&#39; &amp;&amp; Symbol.toStringTag) { /******/ Object.defineProperty(exports, Symbol.toStringTag, { value: &#39;Module&#39; }); /******/ } /******/ Object.defineProperty(exports, &#39;__esModule&#39;, { value: true }); /******/ }; /******/ /******/ // create a fake namespace object /******/ // mode &amp; 1: value is a module id, require it /******/ // mode &amp; 2: merge all properties of value into the ns /******/ // mode &amp; 4: return value when already ns object /******/ // mode &amp; 8|1: behave like require /******/ __webpack_require__.t = function(value, mode) { /******/ if(mode &amp; 1) value = __webpack_require__(value); /******/ if(mode &amp; 8) return value; /******/ if((mode &amp; 4) &amp;&amp; typeof value === &#39;object&#39; &amp;&amp; value &amp;&amp; value.__esModule) return value; /******/ var ns = Object.create(null); /******/ __webpack_require__.r(ns); /******/ Object.defineProperty(ns, &#39;default&#39;, { enumerable: true, value: value }); /******/ if(mode &amp; 2 &amp;&amp; typeof value != &#39;string&#39;) for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key)); /******/ return ns; /******/ }; /******/ /******/ // getDefaultExport function for compatibility with non-harmony modules /******/ __webpack_require__.n = function(module) { /******/ var getter = module &amp;&amp; module.__esModule ? /******/ function getDefault() { return module[&#39;default&#39;]; } : /******/ function getModuleExports() { return module; }; /******/ __webpack_require__.d(getter, &#39;a&#39;, getter); /******/ return getter; /******/ }; /******/ /******/ // Object.prototype.hasOwnProperty.call /******/ __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); }; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = &quot;./&quot;; /******/ /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(__webpack_require__.s = 0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ (function(module, __webpack_exports__, __webpack_require__) { &quot;use strict&quot;; // ESM COMPAT FLAG __webpack_require__.r(__webpack_exports__); // EXPORTS è¿™ä¸€è¡Œæ˜¯å¤„ç†esmçš„å¯¼å‡ºï¼Œå› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯ export { b: xx }ï¼Œ å¦‚æœæˆ‘ä»¬ç”¨cjsçš„å¯¼å‡º æ¯”å¦‚ module.exports = { b: xx }ï¼Œ æ­¤å¤„å°±ä¼šæ²¡æœ‰ï¼Œä¼šæ›´ç®€å•ï¼Œç›´æ¥æ˜¯ module.exports = { b: xx } __webpack_require__.d(__webpack_exports__, &quot;b&quot;, function() { return /* reexport */ b; }); // CONCATENATED MODULE: ./src/test/a.js const b = &#39;xx&#39;; const bbbbbbb = &#39;xx&#39;; // CONCATENATED MODULE: ./src/main.js console.log(b + 1); console.log(1111); /***/ }) /******/ ]);</code></p><p>æ³¨æ„çœ‹ å€’æ•°ç¬¬ 10 å¤šè¡Œï¼Œæœ‰ä¸ª</p><p>java</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>// EXPORTS __webpack_require__.d(__webpack_exports__, &quot;b&quot;, function() { return /* reexport */ b; }); è¿™ä¸€è¡Œæ˜¯å¤„ç†esmçš„å¯¼å‡ºï¼Œå› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯ export { b: xx }ï¼Œ å¦‚æœæˆ‘ä»¬ç”¨cjsçš„å¯¼å‡º æ¯”å¦‚ module.exports = { b: xx }ï¼Œ æ­¤å¤„å°±ä¼šæ²¡æœ‰æ­¤è¡Œï¼Œä¼šæ›´ç®€å•ï¼Œç›´æ¥æ˜¯ module.exports = { b: xx } ï¼ˆ webpackä¼šè‡ªå·±æ¨¡æ‹Ÿå®ç° module.exports ï¼‰</code></p></li></ul><h2 id="ä¸ºä»€ä¹ˆ-webpack-éœ€è¦æ³¨å…¥è¿™ä¹ˆå¤šä»£ç " tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-webpack-éœ€è¦æ³¨å…¥è¿™ä¹ˆå¤šä»£ç "><span>ä¸ºä»€ä¹ˆ webpack éœ€è¦æ³¨å…¥è¿™ä¹ˆå¤šä»£ç ï¼Ÿ</span></a></h2><p>å› ä¸º webpack æ¯” rollup æ—©å‡º 2 å¹´ï¼Œè¯ç”Ÿåœ¨ esm æ ‡å‡†å‡ºæ¥å‰ï¼Œcommonjs å‡ºæ¥å</p><ul><li>å½“æ—¶çš„æµè§ˆå™¨åªèƒ½é€šè¿‡ script æ ‡ç­¾åŠ è½½æ¨¡å— <ul><li><strong>script æ ‡ç­¾åŠ è½½ä»£ç æ˜¯æ²¡æœ‰ä½œç”¨åŸŸçš„ï¼Œåªèƒ½åœ¨ä»£ç å†… ç”¨ iife çš„æ–¹å¼ å®ç°ä½œç”¨åŸŸæ•ˆæœ</strong>ï¼Œ <ul><li><strong>è¿™å°±æ˜¯ webpack æ‰“åŒ…å‡ºæ¥çš„ä»£ç  å¤§ç»“æ„éƒ½æ˜¯ iife çš„åŸå› </strong></li><li>å¹¶ä¸”<strong>æ¯ä¸ªæ¨¡å—éƒ½è¦è£…åˆ° function é‡Œé¢</strong>ï¼Œæ‰èƒ½ä¿è¯äº’ç›¸ä¹‹é—´ä½œç”¨åŸŸä¸å¹²æ‰°ã€‚</li><li><strong>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ webpack æ‰“åŒ…çš„ä»£ç ä¸ºä»€ä¹ˆä¹çœ‹ä¼šæ„Ÿè§‰ä¹±ï¼Œæ‰¾ä¸åˆ°è‡ªå·±å†™çš„ä»£ç çš„çœŸæ­£åŸå› </strong></li></ul></li></ul></li><li>å…³äº webpack çš„ä»£ç æ³¨å…¥é—®é¢˜ï¼Œæ˜¯å› ä¸º<strong>æµè§ˆå™¨ä¸æ”¯æŒ cjs</strong>ï¼Œæ‰€ä»¥<strong>webpack è¦å»è‡ªå·±å®ç° require å’Œ module.exports æ–¹æ³•</strong>ï¼ˆæ‰æœ‰å¾ˆå¤šæ³¨å…¥ï¼‰ï¼ˆwebpack è‡ªå·±å®ç° polyfillï¼‰ <ul><li>è¿™ä¹ˆå¤šå¹´äº†ï¼Œç”šè‡³åˆ°ç°åœ¨ 2022 å¹´ï¼Œ<strong>æµè§ˆå™¨ä¸ºä»€ä¹ˆä¸æ”¯æŒ cjs</strong>ï¼Ÿ <ul><li><strong>cjs æ˜¯åŒæ­¥çš„ï¼Œè¿è¡Œæ—¶çš„ï¼Œnode ç¯å¢ƒç”¨ cjsï¼Œnode æœ¬èº«è¿è¡Œåœ¨æœåŠ¡å™¨ï¼Œæ— éœ€ç­‰å¾…ç½‘ç»œæ¡æ‰‹ï¼Œæ‰€ä»¥åŒæ­¥å¤„ç†æ˜¯å¾ˆå¿«çš„</strong></li><li><strong>æµè§ˆå™¨æ˜¯ å®¢æˆ·ç«¯ï¼Œè®¿é—®çš„æ˜¯æœåŠ¡ç«¯èµ„æºï¼Œä¸­é—´éœ€è¦ç­‰å¾…ç½‘ç»œæ¡æ‰‹ï¼Œå¯èƒ½ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥ä¸èƒ½ åŒæ­¥çš„ å¡åœ¨é‚£é‡Œç­‰æœåŠ¡å™¨è¿”å›çš„ï¼Œä½“éªŒå¤ªå·®</strong></li></ul></li></ul></li><li><strong>åç»­å‡ºæ¥ esm åï¼Œwebpack ä¸ºäº†å…¼å®¹ä»¥å‰å‘åœ¨ npm ä¸Šçš„è€åŒ…</strong>ï¼ˆå¹¶ä¸”å½“æ—¶å¿ƒè¿˜ä¸å¤Ÿå†³ç»ï¼Œå¯¼è‡´è¿™ç§â€œä¸‘ç»“æ„çš„åŒ…â€è¶Šæ¥è¶Šå¤šï¼Œä»¥åå°±æ›´ä¸å¯èƒ½æ”¹è¿™ç§â€œä¸‘ç»“æ„äº†â€ï¼‰ï¼Œæ‰€ä»¥ä¿ç•™è¿™ä¸ª iife çš„ç»“æ„å’Œä»£ç æ³¨å…¥ï¼Œ<strong>å¯¼è‡´ç°åœ¨çœ‹ webpack æ‰“åŒ…çš„äº§ç‰©ï¼Œä¹çœ‹ç»“æ„æ¯”è¾ƒä¹±ä¸”æœ‰å¾ˆå¤šçš„ä»£ç æ³¨å…¥ï¼Œè‡ªå·±å†™çš„ä»£ç éƒ½æ‰¾ä¸åˆ°</strong></li></ul><p>rollup è¯ç”Ÿäº esm æ ‡å‡†å‡ºæ¥åï¼Œå°±æ˜¯é’ˆå¯¹ esm è®¾è®¡çš„ï¼Œä¹Ÿæ²¡æœ‰å†å²åŒ…è¢±ï¼Œæ‰€ä»¥å¯ä»¥åšåˆ°çœŸæ­£çš„â€œæ‰“åŒ…â€ï¼ˆç²¾ç®€ï¼Œæ— é¢å¤–æ³¨å…¥ï¼‰</p><ul><li>ï¼ˆæ ¹æ® npm ç‰ˆæœ¬ä¸Šä¼ æ˜¾ç¤ºæœ€æ—©ä¸Šä¼ æ—¶é—´ï¼š <strong>webpack æ˜¯ 2013 å¹´å·¦å³ï¼Œrollup æ˜¯ 2015.5</strong>ï¼‰</li></ul><h2 id="rollup-å¦‚ä½•æ‰“åŒ…ç¬¬ä¸‰æ–¹ä¾èµ–-å’Œ-æ‡’åŠ è½½æ¨¡å—-å’Œ-å…¬å…±æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#rollup-å¦‚ä½•æ‰“åŒ…ç¬¬ä¸‰æ–¹ä¾èµ–-å’Œ-æ‡’åŠ è½½æ¨¡å—-å’Œ-å…¬å…±æ¨¡å—"><span>rollup å¦‚ä½•æ‰“åŒ…ç¬¬ä¸‰æ–¹ä¾èµ– å’Œ æ‡’åŠ è½½æ¨¡å— å’Œ å…¬å…±æ¨¡å—ï¼Ÿ</span></a></h2><p>å’Œ webpack æ‰“åŒ…ä¸€æ ·ï¼Œæœ‰ä¸¤ç§ï¼šå• chunk åŒ… å’Œ å¤š chunk åŒ…</p><ol><li><p>å• chunk åŒ…</p><p>æ— é¢å¤–é…ç½®ï¼Œä¸€èˆ¬ä¼šæŠŠæ‰€æœ‰ js æ‰“æˆä¸€ä¸ªåŒ…ã€‚æ‰“åŒ…å¤–éƒ¨ä¾èµ–ï¼ˆç¬¬ä¸‰æ–¹ï¼‰ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ¯”å¦‚ï¼š</p><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>// å…¥å£ main.js import Axios from &#39;axios&#39; Axios.get() console.log(1111) ------ æ‰“åŒ…åçš„ç»“æœ ------ // æœ€ç»ˆä¼šæŠŠaxiosçš„æºä»£ç  å’Œ main.js ä¸»ä»£ç ï¼Œæ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶å†…ï¼Œæ— é¢å¤–ä»£ç æ³¨å…¥ // ä»¥ä¸‹æ˜¯æˆªå–äº†ä¸€å¤´ä¸€å°¾ï¼Œä¸­é—´çœç•¥ import require$$1$1 from &#39;http&#39;; import require$$2 from &#39;https&#39;; import require$$0$1 from &#39;url&#39;; import require$$3 from &#39;assert&#39;; import require$$4 from &#39;stream&#39;; import require$$0 from &#39;tty&#39;; import require$$1 from &#39;util&#39;; import require$$7 from &#39;zlib&#39;; var axios$1 = {exports: {}}; var bind$2 = function bind(fn, thisArg) { return function wrap() { var args = new Array(arguments.length); for (var i = 0; i &lt; args.length; i++) { args[i] = arguments[i]; } return fn.apply(thisArg, args); }; }; ... ... ... axios$1.exports = axios; // Allow use of default import syntax in TypeScript axios$1.exports.default = axios; var _axios_0_18_1_axios = axios$1.exports; _axios_0_18_1_axios.get(); console.log(1111);</code></p><p><strong>æ­¤å¤„ rollup æ‰“åŒ…æœ‰ä¸ªæ³¨æ„ç‚¹</strong>ï¼š</p><ul><li><p>å¾ˆå¤šç¬¬ä¸‰æ–¹ä¾èµ–å¾ˆæ—©å°±æœ‰äº†ï¼Œæ‰€ä»¥ç”¨çš„æ˜¯<strong>commonjs æ¨¡å—å¯¼å‡º</strong>ï¼Œrollup æ‰“åŒ…çš„è¯ï¼Œéœ€è¦å®‰è£…æ’ä»¶@rollup/plugin-node-resolveã€‚å› ä¸ºæ˜¯ cjs çš„åŒ…ï¼Œæ‰€ä»¥ä¹Ÿä¸å­˜åœ¨ tree shaking</p><ul><li>æ’ä»¶åŸç†æ˜¯ï¼ŒæŠŠ cjs çš„åŒ…ï¼Œè½¬æˆ esm åŒ…ï¼Œåœ¨æ‰“åŒ…</li></ul></li><li><p>ç°åœ¨æ¯”è¾ƒæµè¡Œçš„ monorepoï¼Œå°±æ˜¯å®Œå…¨ç”¨ esm å†™åº“+rollup æ‰“åŒ…ï¼Œå¯ä»¥å¾ˆè½»æ˜“çš„åšåˆ° tree shakingï¼Œ<strong>è®©æ ¸å¿ƒåº“å˜çš„æ›´å°ï¼Œè§£æé€Ÿåº¦æ›´å¿«ï¼Œè¿˜å¯ä»¥å¯¹å¤–æä¾›å·¥å…·ï¼Œæ‰©å¤§å½±å“åŠ›</strong></p></li></ul></li><li><p>å¤šä¸ª chunk åŒ…ï¼ˆä»£ç åˆ†ç¦»ï¼‰</p><ol><li><p>é…ç½®å¤šä¸ªå…¥å£ï¼Œæ­¤æ³•æ¯”è¾ƒç®€å•ï¼Œå¯è‡ªè¡Œæµ‹è¯•</p><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>// rollup.config.js input: { index: &#39;src/main.js&#39;, other: &#39;src/other.js&#39;, },</code></p></li><li><p>ä»£ç åˆ†ç¦» ï¼ˆ<strong>åŠ¨æ€ importï¼Œæ‡’åŠ è½½ï¼Œ import(xxx).then(module =&gt; {})</strong> ï¼‰</p></li></ol><ul><li><p><a href="https://link.juejin.cn?target=https%3A%2F%2Frollupjs.org%2Frepl%2F%3Fversion%3D1.6.0%26shareable%3DJTdCJTIybW9kdWxlcyUyMiUzQSU1QiU3QiUyMm5hbWUlMjIlM0ElMjJtYWluLmpzJTIyJTJDJTIyY29kZSUyMiUzQSUyMiUyRiolMjBEWU5BTUlDJTIwSU1QT1JUUyU1Q24lMjAlMjAlMjBSb2xsdXAlMjBzdXBwb3J0cyUyMGF1dG9tYXRpYyUyMGNodW5raW5nJTIwYW5kJTIwbGF6eS1sb2FkaW5nJTVDbiUyMCUyMCUyMHZpYSUyMGR5bmFtaWMlMjBpbXBvcnRzJTIwdXRpbGl6aW5nJTIwdGhlJTIwaW1wb3J0JTIwbWVjaGFuaXNtJTVDbiUyMCUyMCUyMG9mJTIwdGhlJTIwaG9zdCUyMHN5c3RlbS4lMjAqJTJGJTVDbmlmJTIwKGRpc3BsYXlNYXRoKSUyMCU3QiU1Q24lNUN0aW1wb3J0KCcuJTJGbWF0aHMuanMnKS50aGVuKGZ1bmN0aW9uJTIwKG1hdGhzKSUyMCU3QiU1Q24lNUN0JTVDdGNvbnNvbGUubG9nKG1hdGhzLnNxdWFyZSg1KSklM0IlNUNuJTVDdCU1Q3Rjb25zb2xlLmxvZyhtYXRocy5jdWJlKDUpKSUzQiU1Q24lNUN0JTdEKSUzQiU1Q24lN0QlMjIlMkMlMjJpc0VudHJ5JTIyJTNBdHJ1ZSU3RCUyQyU3QiUyMm5hbWUlMjIlM0ElMjJtYXRocy5qcyUyMiUyQyUyMmNvZGUlMjIlM0ElMjJpbXBvcnQlMjBzcXVhcmUlMjBmcm9tJTIwJy4lMkZzcXVhcmUuanMnJTNCJTVDbiU1Q25leHBvcnQlMjAlN0JkZWZhdWx0JTIwYXMlMjBzcXVhcmUlN0QlMjBmcm9tJTIwJy4lMkZzcXVhcmUuanMnJTNCJTVDbiU1Q25leHBvcnQlMjBmdW5jdGlvbiUyMGN1YmUlMjAoeCUyMCklMjAlN0IlNUNuJTVDdHJldHVybiUyMHNxdWFyZSh4KSUyMColMjB4JTNCJTVDbiU3RCUyMiUyQyUyMmlzRW50cnklMjIlM0FmYWxzZSU3RCUyQyU3QiUyMm5hbWUlMjIlM0ElMjJzcXVhcmUuanMlMjIlMkMlMjJjb2RlJTIyJTNBJTIyZXhwb3J0JTIwZGVmYXVsdCUyMGZ1bmN0aW9uJTIwc3F1YXJlJTIwKCUyMHglMjApJTIwJTdCJTVDbiU1Q3RyZXR1cm4lMjB4JTIwKiUyMHglM0IlNUNuJTdEJTIyJTJDJTIyaXNFbnRyeSUyMiUzQWZhbHNlJTdEJTVEJTJDJTIyb3B0aW9ucyUyMiUzQSU3QiUyMmZvcm1hdCUyMiUzQSUyMmNqcyUyMiUyQyUyMm5hbWUlMjIlM0ElMjJteUJ1bmRsZSUyMiUyQyUyMmFtZCUyMiUzQSU3QiUyMmlkJTIyJTNBJTIyJTIyJTdEJTJDJTIyZ2xvYmFscyUyMiUzQSU3QiU3RCU3RCUyQyUyMmV4YW1wbGUlMjIlM0FudWxsJTdE" title="https://rollupjs.org/repl/?version=1.6.0&amp;shareable=JTdCJTIybW9kdWxlcyUyMiUzQSU1QiU3QiUyMm5hbWUlMjIlM0ElMjJtYWluLmpzJTIyJTJDJTIyY29kZSUyMiUzQSUyMiUyRiolMjBEWU5BTUlDJTIwSU1QT1JUUyU1Q24lMjAlMjAlMjBSb2xsdXAlMjBzdXBwb3J0cyUyMGF1dG9tYXRpYyUyMGNodW5raW5nJTIwYW5kJTIwbGF6eS1sb2FkaW5nJTVDbiUyMCUyMCUyMHZpYSUyMGR5bmFtaWMlMjBpbXBvcnRzJTIwdXRpbGl6aW5nJTIwdGhlJTIwaW1wb3J0JTIwbWVjaGFuaXNtJTVDbiUyMCUyMCUyMG9mJTIwdGhlJTIwaG9zdCUyMHN5c3RlbS4lMjAqJTJGJTVDbmlmJTIwKGRpc3BsYXlNYXRoKSUyMCU3QiU1Q24lNUN0aW1wb3J0KCcuJTJGbWF0aHMuanMnKS50aGVuKGZ1bmN0aW9uJTIwKG1hdGhzKSUyMCU3QiU1Q24lNUN0JTVDdGNvbnNvbGUubG9nKG1hdGhzLnNxdWFyZSg1KSklM0IlNUNuJTVDdCU1Q3Rjb25zb2xlLmxvZyhtYXRocy5jdWJlKDUpKSUzQiU1Q24lNUN0JTdEKSUzQiU1Q24lN0QlMjIlMkMlMjJpc0VudHJ5JTIyJTNBdHJ1ZSU3RCUyQyU3QiUyMm5hbWUlMjIlM0ElMjJtYXRocy5qcyUyMiUyQyUyMmNvZGUlMjIlM0ElMjJpbXBvcnQlMjBzcXVhcmUlMjBmcm9tJTIwJy4lMkZzcXVhcmUuanMnJTNCJTVDbiU1Q25leHBvcnQlMjAlN0JkZWZhdWx0JTIwYXMlMjBzcXVhcmUlN0QlMjBmcm9tJTIwJy4lMkZzcXVhcmUuanMnJTNCJTVDbiU1Q25leHBvcnQlMjBmdW5jdGlvbiUyMGN1YmUlMjAoeCUyMCklMjAlN0IlNUNuJTVDdHJldHVybiUyMHNxdWFyZSh4KSUyMColMjB4JTNCJTVDbiU3RCUyMiUyQyUyMmlzRW50cnklMjIlM0FmYWxzZSU3RCUyQyU3QiUyMm5hbWUlMjIlM0ElMjJzcXVhcmUuanMlMjIlMkMlMjJjb2RlJTIyJTNBJTIyZXhwb3J0JTIwZGVmYXVsdCUyMGZ1bmN0aW9uJTIwc3F1YXJlJTIwKCUyMHglMjApJTIwJTdCJTVDbiU1Q3RyZXR1cm4lMjB4JTIwKiUyMHglM0IlNUNuJTdEJTIyJTJDJTIyaXNFbnRyeSUyMiUzQWZhbHNlJTdEJTVEJTJDJTIyb3B0aW9ucyUyMiUzQSU3QiUyMmZvcm1hdCUyMiUzQSUyMmNqcyUyMiUyQyUyMm5hbWUlMjIlM0ElMjJteUJ1bmRsZSUyMiUyQyUyMmFtZCUyMiUzQSU3QiUyMmlkJTIyJTNBJTIyJTIyJTdEJTJDJTIyZ2xvYmFscyUyMiUzQSU3QiU3RCU3RCUyQyUyMmV4YW1wbGUlMjIlM0FudWxsJTdE" target="_blank" rel="noopener noreferrer">æ­¤å¤„æœ‰ä¸€ä¸ªå®˜æ–¹çš„ä¾‹å­ï¼Œå†æ¸…æ¥šä¸è¿‡äº†</a></p><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>// å…¥å£ main.js /* DYNAMIC IMPORTS åŠ¨æ€import Rollup supports automatic chunking and lazy-loading Rollupæ”¯æŒè‡ªåŠ¨åˆ†å—å’Œæ‡’åŠ è½½ via dynamic imports utilizing the import mechanism é€šè¿‡dynamic importsåŠ¨æ€å¯¼å…¥ of the host system. */ if (displayMath) { import(&#39;./maths.js&#39;).then(function (maths) { console.log(maths.square(5)); console.log(maths.cube(5)); }); } // &#39;./maths.js&#39; import square from &#39;./square.js&#39;; export {default as square} from &#39;./square.js&#39;; export function cube (x ) { return square(x) * x; } // &#39;./square.js&#39; export default function square ( x ) { return x * x; } ---------------- æ‰“åŒ…ç»“æœ ---------------- // main.js &#39;use strict&#39;; /* DYNAMIC IMPORTS åŠ¨æ€import Rollup supports automatic chunking and lazy-loading Rollupæ”¯æŒè‡ªåŠ¨åˆ†å—å’Œæ‡’åŠ è½½ via dynamic imports utilizing the import mechanism é€šè¿‡dynamic importsåŠ¨æ€å¯¼å…¥ of the host system. */ if (displayMath) { // æ‰“åŒ…æˆcjsæ¨¡å—çš„è¯ï¼Œimportæ›¿æ¢æˆ Promise + require // Promise.resolve(require(&#39;../chunk-0ee5c472.js&#39;)).then(function (maths) { import(&#39;../chunk-c4d97f01.js&#39;).then(function (maths) { console.log(maths.square(5)); console.log(maths.cube(5)); }); } // &#39;../chunk-0ee5c472.js&#39; &#39;use strict&#39;; function square ( x ) { return x * x; } function cube (x ) { return square(x) * x; } exports.cube = cube; exports.square = square;</code></p><p>å¯¹äºä»£ç åˆ†å‰²ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥é€šè¿‡ <strong>output.manualChunks</strong> é€‰é¡¹<strong>æ˜¾å¼</strong>å‘Šè¯‰ Rollup å“ªäº›æ¨¡å—è¦<strong>åˆ†å‰²æˆå•ç‹¬çš„å—</strong>ã€‚</p><p><strong>æ€»ç»“</strong>ï¼š</p><ul><li><p><strong>åŠ¨æ€ importï¼Œrollup å¯¹æ¯” webpack æ‰“åŒ…åçš„æ¨¡å—æ ¼å¼çš„æ”¯æŒåº¦</strong></p><table><thead><tr><th>æ‰“åŒ…åçš„æ¨¡å—æ ¼å¼ï¼š</th><th>esm</th><th>cjs</th><th>amd</th><th>umd</th></tr></thead><tbody><tr><td>webpack</td><td>ä¸æ”¯æŒï¼Œå®éªŒä¸­</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>rollup</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table></li><li><p>å®ç°åŸç†ï¼Œå¯¹æ¯” webpackï¼š</p><ul><li>webpack æ˜¯<strong>è‡ªå·±å®ç°çš„â€œåŠ¨æ€ importâ€œ</strong>ï¼ˆå€ŸåŠ© promise + script æ ‡ç­¾ + window å¯¹è±¡ + æ¨¡æ‹Ÿ import æ–¹æ³•ï¼‰</li><li>rollup æ˜¯ ï¼ˆæ‰“åŒ…æˆ esm æ¨¡å—ï¼‰åˆ©ç”¨æµè§ˆå™¨ï¼ˆchorme63 ä»¥ä¸Šï¼‰å¤©ç„¶æ”¯æŒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FStatements%2Fimport%23%25E5%258A%25A8%25E6%2580%2581import" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import#%E5%8A%A8%E6%80%81import" target="_blank" rel="noopener noreferrer">åŠ¨æ€ import</a><ul><li>æˆ– ï¼ˆæ‰“åŒ…æˆ cjs æ¨¡å—ï¼‰promise + cjs çš„ require</li></ul></li></ul></li><li><p><strong>æ­¤å¤„æœ‰ä¸ªå¾ˆé‡è¦ç»†èŠ‚ç‚¹</strong></p><ul><li>rollup æ‰“çš„åŒ…ï¼Œå¦‚æœè¦ç”¨ åŠ¨æ€ importï¼ˆç°åœ¨ vue å’Œ react çš„å•é¡µé¡¹ç›® ç‰¹åˆ«æµè¡Œç”¨åŠ¨æ€ import åŠ è½½è·¯ç”±ï¼Œç®—ç¡¬éœ€æ±‚äº†ï¼‰ï¼Œ<strong>æ³¨æ„ å¦‚æœè¦åœ¨æµè§ˆå™¨ä¸Šè·‘ï¼Œé¦–å…ˆè¦æ˜¯ esm çš„åŒ…ï¼ˆæµè§ˆå™¨ä¸æ”¯æŒ cjsï¼‰ï¼Œç„¶åæµè§ˆå™¨ç‰ˆæœ¬è¦æ³¨æ„ï¼ˆchorme63 ä»¥ä¸Šï¼‰</strong><ul><li>å› ä¸º rollup ä¸åšé¢å¤–ä»£ç æ³¨å…¥ï¼Œå®Œå…¨åˆ©ç”¨é«˜ç‰ˆæœ¬æµè§ˆå™¨åŸç”Ÿæ”¯æŒ importï¼ˆæ‰€ä»¥ä»£ç ç‰¹åˆ«å¹²å‡€ï¼Œwebpack ä¼šåšå¤§é‡çš„å…¼å®¹ è‡ªå·±å®ç° require å’Œ importï¼‰ <img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0b0bf8de76c41dc9f96ad8c4ad7c313~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="esm-compatible.png"></li></ul></li></ul></li></ul></li></ul><ol start="3"><li><p>rollup å¦‚ä½•å¤„ç†å…¬å…±æ¨¡å—ï¼Ÿï¼ˆæ¯”å¦‚ï¼Œ aã€bã€c 3 ä¸ªæ¨¡å— åŒæ—¶ä¾èµ– dï¼‰</p><p><strong>æœ‰ 2 ç§æƒ…å†µï¼š</strong></p><ol><li><p>æºä»£ç å†… <strong>ä¸å­˜åœ¨ åŠ¨æ€ import</strong>ï¼Œé‚£ä¹ˆä¼šæ‰“æˆ<strong>ä¸€ä¸ª chunk</strong>ï¼ˆaã€bã€cã€d 4 ä¸ªæ¨¡å—éƒ½åœ¨ä¸€åŒ…å†…ï¼Œd åªæ­£å¸¸æœ‰ä¸€ä»½ï¼‰</p></li><li><p>æºä»£ç å†… <strong>å­˜åœ¨ æ‡’åŠ è½½æ¨¡å—ï¼Œå¹¶ä¸”æ‡’åŠ è½½çš„æ¨¡å—ä¹Ÿè®¿é—®äº†å…¬å…±ä¾èµ–</strong>ï¼Œæ¯”å¦‚</p><p>js</p><p>ä»£ç è§£è¯»</p><p>å¤åˆ¶ä»£ç </p><p><code>// å…¥å£ main.js import {deepCopy} from &#39;@xxx/methods/deepCopy.js&#39; // è¿™æ˜¯æ”¾åœ¨å…¬å¸çš„npmåŸŸå†…çš„ä¸€ä¸ªåŒ…ï¼Œå¯ä»¥ç†è§£ä¸ºexportä¸€ä¸ªç®€å•çš„deepCopyå‡½æ•° console.log(deepCopy(a)) import(&#39;./test/a&#39;).then(e =&gt; { console.log(e) }) // &#39;./test/a&#39; æ‡’åŠ è½½æ¨¡å— ä¹Ÿä¾èµ– åŒä¸€å…¬å…±æ¨¡å— import {deepCopy} from &#39;@xxx/methods/deepCopy.js&#39; const a = {a: 1} export const b = deepCopy(a) ---------- æ˜¯å¦ä¼šæŠŠ å…¬å…±ä¾èµ– æ‰“åŒ…2ä»½å‘¢? -------------- ç­”æ¡ˆæ˜¯noï¼Œrollupè¿˜æ˜¯ç‰›pï¼Œå…¬å…±ä¾èµ–åªä¼šå‡ºæ¥ä¸€ä»½ï¼Œç„¶åå¯¹å¤– export ï¼ˆæ­¤å¤„ä¸¾ä¾‹æ˜¯å¯¼å‡ºesmæ ¼å¼ï¼Œ äº²æµ‹å¯¼å‡ºcjsæ ¼å¼ä¸€æ ·çš„å¯ä»¥ï¼Œæ­¤å¤„å°±ä¸èµ˜è¿°ï¼Œæœ‰å…´è¶£å¯ä»¥è‡ªå·±testä¸€ä¸‹ï¼‰ ç”Ÿæˆçš„ç›®å½•ç»“æ„ï¼Œæœ‰3ä¸ªæ–‡ä»¶ a-19173be8.js main.js main-219c2eaf.js // main.js import &#39;./main-219c2eaf.js&#39;; // main-219c2eaf.js const deepCopy = function (obj) { // do .. }; console.log(deepCopy(a)); import(&#39;./a-19173be8.js&#39;).then(e =&gt; { console.log(e); }); // a-19173be8.js import { d as deepCopy } from &#39;./main-219c2eaf.js&#39;; const a = {a: 1}; const b = deepCopy(a); export { b };</code></p><p>æ€»ç»“ï¼š<strong>å¯¹äºå…¬å…±ä¾èµ–ï¼Œrollup ä¸ä¼šå‡ºç°é‡å¤æ‰“åŒ…çš„æƒ…å†µï¼å¹¶ä¸”å®Œå…¨æ— æ³¨å…¥ä»£ç ï¼æ— éœ€é¢å¤–é…ç½®ã€‚</strong> å¯¹æ¯” webpack çš„è¯ï¼Œwebpack éœ€è¦é…ç½® optimization.splitChunks ï¼ˆwebpack4.x ä»¥ä¸Šï¼‰</p></li></ol></li></ol></li></ol><h2 id="æ€»ç»“-rollup-vs-webpack" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-rollup-vs-webpack"><span><strong>æ€»ç»“</strong> rollup vs webpack</span></a></h2><h3 id="rollup-è¯ç”Ÿåœ¨-esm-æ ‡å‡†å‡ºæ¥å" tabindex="-1"><a class="header-anchor" href="#rollup-è¯ç”Ÿåœ¨-esm-æ ‡å‡†å‡ºæ¥å"><span>rollup è¯ç”Ÿåœ¨ esm æ ‡å‡†å‡ºæ¥å</span></a></h3><ul><li><strong>å‡ºå‘ç‚¹å°±æ˜¯å¸Œæœ›å¼€å‘è€…å»å†™ esm æ¨¡å—</strong>ï¼Œè¿™æ ·é€‚åˆåšä»£ç é™æ€åˆ†æï¼Œå¯ä»¥åš tree shaking å‡å°‘ä»£ç ä½“ç§¯ï¼Œä¹Ÿæ˜¯æµè§ˆå™¨é™¤äº† script æ ‡ç­¾å¤–ï¼ŒçœŸæ­£è®© JavaScript æ‹¥æœ‰æ¨¡å—åŒ–èƒ½åŠ›ã€‚æ˜¯ js è¯­è¨€çš„æœªæ¥</li><li><strong>rollup å®Œå…¨ä¾èµ–é«˜ç‰ˆæœ¬æµè§ˆå™¨åŸç”Ÿå»æ”¯æŒ esm æ¨¡å—ï¼Œæ‰€ä»¥æ— é¢å¤–ä»£ç æ³¨å…¥ï¼Œæ‰“åŒ…åçš„ä»£ç ç»“æ„ä¹Ÿæ˜¯æ¸…æ™°çš„</strong>ï¼ˆä¸ç”¨åƒ webpack é‚£æ · iifeï¼‰ <ul><li>ç›®å‰æµè§ˆå™¨æ”¯æŒæ¨¡å—åŒ–åªæœ‰ 3 ç§æ–¹æ³•ï¼š <ol><li>â‘ script æ ‡ç­¾ï¼ˆç¼ºç‚¹æ²¡æœ‰ä½œç”¨åŸŸçš„æ¦‚å¿µï¼‰</li><li>â‘¡script æ ‡ç­¾ + iife + window + å‡½æ•°ä½œç”¨åŸŸï¼ˆå¯ä»¥è§£å†³ä½œç”¨åŸŸé—®é¢˜ã€‚webpack çš„æ‰“åŒ…çš„äº§ç‰©å°±è¿™æ ·ï¼‰</li><li>â‘¢esm ï¼ˆä»€ä¹ˆéƒ½å¥½ï¼Œå”¯ä¸€ç¼ºç‚¹ éœ€è¦é«˜ç‰ˆæœ¬æµè§ˆå™¨ï¼‰</li></ol></li></ul></li></ul><h3 id="webpack-è¯ç”Ÿåœ¨-esm-æ ‡å‡†å‡ºæ¥å‰-commonjs-å‡ºæ¥å" tabindex="-1"><a class="header-anchor" href="#webpack-è¯ç”Ÿåœ¨-esm-æ ‡å‡†å‡ºæ¥å‰-commonjs-å‡ºæ¥å"><span>webpack è¯ç”Ÿåœ¨ esm æ ‡å‡†å‡ºæ¥å‰ï¼Œcommonjs å‡ºæ¥å</span></a></h3><ul><li>å½“æ—¶çš„æµè§ˆå™¨åªèƒ½é€šè¿‡ script æ ‡ç­¾åŠ è½½æ¨¡å— <ul><li><strong>script æ ‡ç­¾åŠ è½½ä»£ç æ˜¯æ²¡æœ‰ä½œç”¨åŸŸçš„ï¼Œåªèƒ½åœ¨ä»£ç å†… ç”¨ iife çš„æ–¹å¼ å®ç°ä½œç”¨åŸŸæ•ˆæœ</strong>ï¼Œ <ul><li><strong>è¿™å°±æ˜¯ webpack æ‰“åŒ…å‡ºæ¥çš„ä»£ç  å¤§ç»“æ„éƒ½æ˜¯ iife çš„åŸå› </strong></li><li>å¹¶ä¸”<strong>æ¯ä¸ªæ¨¡å—éƒ½è¦è£…åˆ° function é‡Œé¢</strong>ï¼Œæ‰èƒ½ä¿è¯äº’ç›¸ä¹‹é—´ä½œç”¨åŸŸä¸å¹²æ‰°ã€‚</li><li><strong>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ webpack æ‰“åŒ…çš„ä»£ç ä¸ºä»€ä¹ˆä¹çœ‹ä¼šæ„Ÿè§‰ä¹±ï¼Œæ‰¾ä¸åˆ°è‡ªå·±å†™çš„ä»£ç çš„çœŸæ­£åŸå› </strong></li></ul></li></ul></li><li>å…³äº webpack çš„ä»£ç æ³¨å…¥é—®é¢˜ï¼Œæ˜¯å› ä¸º<strong>æµè§ˆå™¨ä¸æ”¯æŒ cjs</strong>ï¼Œæ‰€ä»¥<strong>webpack è¦å»è‡ªå·±å®ç° require å’Œ module.exports æ–¹æ³•</strong>ï¼ˆæ‰æœ‰å¾ˆå¤šæ³¨å…¥ï¼‰ <ul><li>è¿™ä¹ˆå¤šå¹´äº†ï¼Œç”šè‡³åˆ°ç°åœ¨ 2022 å¹´ï¼Œ<strong>æµè§ˆå™¨ä¸ºä»€ä¹ˆä¸æ”¯æŒ cjs</strong>ï¼Ÿ <ul><li><strong>cjs æ˜¯åŒæ­¥çš„ï¼Œè¿è¡Œæ—¶çš„ï¼Œnode ç¯å¢ƒç”¨ cjsï¼Œnode æœ¬èº«è¿è¡Œåœ¨æœåŠ¡å™¨ï¼Œæ— éœ€ç­‰å¾…ç½‘ç»œæ¡æ‰‹ï¼Œæ‰€ä»¥åŒæ­¥å¤„ç†æ˜¯å¾ˆå¿«çš„</strong></li><li><strong>æµè§ˆå™¨æ˜¯ å®¢æˆ·ç«¯ï¼Œè®¿é—®çš„æ˜¯æœåŠ¡ç«¯èµ„æºï¼Œä¸­é—´éœ€è¦ç­‰å¾…ç½‘ç»œæ¡æ‰‹ï¼Œå¯èƒ½ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥ä¸èƒ½ åŒæ­¥çš„ å¡åœ¨é‚£é‡Œç­‰æœåŠ¡å™¨è¿”å›çš„ï¼Œä½“éªŒå¤ªå·®</strong></li></ul></li></ul></li><li><strong>åç»­å‡ºæ¥ esm åï¼Œwebpack ä¸ºäº†å…¼å®¹ä»¥å‰å‘åœ¨ npm ä¸Šçš„è€åŒ…</strong>ï¼ˆå¹¶ä¸”å½“æ—¶å¿ƒè¿˜ä¸å¤Ÿå†³ç»ï¼Œå¯¼è‡´è¿™ç§â€œä¸‘ç»“æ„çš„åŒ…â€è¶Šæ¥è¶Šå¤šï¼Œä»¥åå°±æ›´ä¸å¯èƒ½æ”¹è¿™ç§â€œä¸‘ç»“æ„äº†â€ï¼‰ï¼Œæ‰€ä»¥ä¿ç•™è¿™ä¸ª iife çš„ç»“æ„å’Œä»£ç æ³¨å…¥ï¼Œ<strong>å¯¼è‡´ç°åœ¨çœ‹ webpack æ‰“åŒ…çš„äº§ç‰©ï¼Œä¹çœ‹ç»“æ„æ¯”è¾ƒä¹±ä¸”æœ‰å¾ˆå¤šçš„ä»£ç æ³¨å…¥ï¼Œè‡ªå·±å†™çš„ä»£ç éƒ½æ‰¾ä¸åˆ°</strong></li></ul><h2 id="æœ€ç»ˆä½¿ç”¨æ¨è" tabindex="-1"><a class="header-anchor" href="#æœ€ç»ˆä½¿ç”¨æ¨è"><span>æœ€ç»ˆä½¿ç”¨æ¨è</span></a></h2><ol><li><p>æ‰“åŒ…<strong>å¼€æºåº“</strong>ï¼š<strong>ä¸ç”¨æ€è€ƒï¼Œrollup ä¼šæ˜¯ä½ æ›´å¥½çš„é€‰æ‹©</strong></p><ul><li>rollup æœ¬èº«ä¹Ÿæ”¯æŒå¾ˆå¤šæ’ä»¶ï¼Œç”Ÿæ€ä¹Ÿæˆç†Ÿï¼Œå„ç§åœºæ™¯å‡ ä¹éƒ½èƒ½ç…§é¡¾åˆ°</li></ul></li><li><p>æ‰“åŒ…<strong>åº”ç”¨ç¨‹åº</strong>ï¼šä¸ªäººæ¨èï¼Œçœ‹æ‚¨çš„ åº”ç”¨ç¨‹åº <strong>éœ€ä¸éœ€è¦å…¼å®¹è€æµè§ˆå™¨</strong></p><p>å…¼å®¹è¡¨å¦‚ä¸‹ï¼ˆå…¶å®å°±æ˜¯ åŠ¨æ€ import çš„å…¼å®¹è¡¨ ï¼‰ ä»¥ chorme ä¸ºä¾‹ï¼Œéœ€è¦ chorme63 ä»¥ä¸Š <img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0b0bf8de76c41dc9f96ad8c4ad7c313~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="esm-compatible.png"></p><p><strong>å¦‚æœä¸è€ƒè™‘å…¼å®¹è€æµè§ˆå™¨ï¼Œå»ºè®®ç”¨ vite å¼€å‘åº”ç”¨ç¨‹åº</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vitejs.dev%2Fguide%2Fwhy.html" title="https://cn.vitejs.dev/guide/why.html" target="_blank" rel="noopener noreferrer">vite å®˜ç½‘ï¼ˆreact/vue/ts éƒ½æ”¯æŒï¼‰</a> ï¼‰</p><ul><li><strong>dev å¼€å‘æ–¹é¢</strong>ï¼švite æä¾› dev æœåŠ¡å™¨ï¼Œä»¥åŠæ¯” webpack å¿«çš„å¤šçš„çƒ­æ›´æ–°ï¼Œdev å¼€å‘çš„ä½“éªŒæ›´å¥½äº†</li><li><strong>prd ç”Ÿäº§æ–¹é¢</strong>ï¼švite æ‰“ç”Ÿäº§åŒ…ï¼Œå®é™…ä¸Šç”¨çš„å°±æ˜¯<strong>rollup</strong>ï¼Œç¬”è€…ç”¨ vite å·²ç»ä¸Šè¿‡çœŸå®é¡¹ç›®ï¼Œå¼€å‘ä½“éªŒå¾ˆæ£’ï¼Œ<strong>æ‰“çš„ç”Ÿäº§åŒ…æ¯”ç”¨ webpack å°äº†å¾ˆå¤šï¼Œæœ‰ä¸é”™çš„æ€§èƒ½æå‡</strong><ul><li>vite çš„ä¼˜ç‚¹å’Œç‰¹ç‚¹ï¼Œå¯ä»¥çœ‹æˆ‘å¦ä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/7050293652739850271" title="https://juejin.cn/post/7050293652739850271" target="_blank" rel="noopener noreferrer">vite åŸç†æµ…æ-dev ç¯‡ï¼ˆå¯¹æ¯” webpackï¼‰</a></li></ul></li><li><strong>ç†è®ºä¸Š chorme63 ä»¥ä¸Š å¯ä»¥å¼€ç®±å³ç”¨ï¼Œchorme63 ä»¥ä¸‹ä¹Ÿä¸æ˜¯å®Œå…¨ä¸èƒ½ç”¨</strong>ï¼Œéœ€è¦è‡ªå·±åŠ <strong>polyfill</strong>æˆ– vite æ’ä»¶ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vitejs.dev%2Fguide%2Fbuild.html%23browser-compatibility" title="https://cn.vitejs.dev/guide/build.html#browser-compatibility" target="_blank" rel="noopener noreferrer">vite æ¨èçš„å…¼å®¹åšæ³•</a> ï¼‰</li></ul></li></ol><hr><p>ç¯‡å¹…æœ‰ç‚¹é•¿ï¼Œæœ€å¥½å…ˆå¯¹ webpack æœ‰å……åˆ†çš„äº†è§£ï¼Œåœ¨çœ‹æ­¤ç¯‡ï¼Œä¼šæ›´å¥½ç†è§£ å’Œ å…¨é¢å¯¹æ¯”ã€‚äº†è§£ webpack å¯ä»¥å…ˆçœ‹ç¬”è€…çš„ä¸Šç¯‡ <a href="https://juejin.cn/post/7053998924071174175" title="https://juejin.cn/post/7053998924071174175" target="_blank" rel="noopener noreferrer">webpack æ‰“åŒ…äº§ç‰©è§£æåŠåŸç†ï¼ˆå« cjs/esm/ä»£ç åˆ†ç¦»/æ‡’åŠ è½½ï¼‰</a></p><p>ç¬”è€…å»ºè®®ï¼Œæœ€å¥½è‡ªå·±ä¸Šæ‰‹æ‰“åŒ… è°ƒè¯•ï¼Œå¾—åˆ°çš„æ‰“åŒ…äº§ç‰© å¹¶ä»”ç»†åˆ†æã€‚ä¸€æ—¶çœ‹ä¸æ‡‚çš„è¯ï¼Œä¹Ÿå¯ä»¥æ”¶è—æœ¬æ–‡ï¼Œè¿‡æ®µæ—¶é—´åœ¨çœ‹ï¼Œå…ˆäº†è§£å‰ç½®çŸ¥è¯†</p><p>æœ€åï¼Œæ„Ÿè°¢çˆ±å­¦ä¹ çš„ä½ ï¼Œè°¢è°¢ç‚¹èµï¼</p><p>æœ¬æ–‡è½¬è‡ª <a href="https://juejin.cn/post/7054752322269741064/" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7054752322269741064/</a></p>',61)]))}const a=t(p,[["render",i]]),u=JSON.parse('{"path":"/article/roqfufms/","title":"rollupæ‰“åŒ…äº§ç‰©è§£æåŠåŸç†","lang":"zh-CN","frontmatter":{"title":"rollupæ‰“åŒ…äº§ç‰©è§£æåŠåŸç†","author":"æå˜‰æ˜","createTime":"2024/12/22 20:29:57","permalink":"/article/roqfufms/","tags":["node"],"description":"ä¸Šç¯‡ï¼š webpack æ‰“åŒ…äº§ç‰©è§£æåŠåŸç†ï¼ˆå« cjs/esm/ä»£ç åˆ†ç¦»/æ‡’åŠ è½½ï¼‰ rollup å®šä½ rollup æ¯” webpack æ™šå‡º 2 å¹´ï¼Œå¯¹æ¯” webpack è‚¯å®šæ˜¯æœ‰å·®å¼‚åŒ–çš„ æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å®˜ç½‘rollupjs.org/guide/en/#oâ€¦ å¾—åˆ°ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ å»ºè®®å¼€å‘è€…ä½¿ç”¨ esm å†™æ¨¡å—ã€‚ ä½¿ç”¨ esm æ¨¡å—çš„å¥½å¤„å°±å¾ˆå¤šäº†ï¼šï¼ˆå¯ä»¥å‚...","head":[["meta",{"property":"og:url","content":"http://garmin21.github.io/jm-blog/article/roqfufms/"}],["meta",{"property":"og:site_name","content":"Garming"}],["meta",{"property":"og:title","content":"rollupæ‰“åŒ…äº§ç‰©è§£æåŠåŸç†"}],["meta",{"property":"og:description","content":"ä¸Šç¯‡ï¼š webpack æ‰“åŒ…äº§ç‰©è§£æåŠåŸç†ï¼ˆå« cjs/esm/ä»£ç åˆ†ç¦»/æ‡’åŠ è½½ï¼‰ rollup å®šä½ rollup æ¯” webpack æ™šå‡º 2 å¹´ï¼Œå¯¹æ¯” webpack è‚¯å®šæ˜¯æœ‰å·®å¼‚åŒ–çš„ æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å®˜ç½‘rollupjs.org/guide/en/#oâ€¦ å¾—åˆ°ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ å»ºè®®å¼€å‘è€…ä½¿ç”¨ esm å†™æ¨¡å—ã€‚ ä½¿ç”¨ esm æ¨¡å—çš„å¥½å¤„å°±å¾ˆå¤šäº†ï¼šï¼ˆå¯ä»¥å‚..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf95fb883bf6493ebce867bd78534f4f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-22T12:56:54.000Z"}],["meta",{"property":"article:author","content":"æå˜‰æ˜"}],["meta",{"property":"article:tag","content":"node"}],["meta",{"property":"article:modified_time","content":"2024-12-22T12:56:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"rollupæ‰“åŒ…äº§ç‰©è§£æåŠåŸç†\\",\\"image\\":[\\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf95fb883bf6493ebce867bd78534f4f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?\\",\\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0b0bf8de76c41dc9f96ad8c4ad7c313~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?\\",\\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0b0bf8de76c41dc9f96ad8c4ad7c313~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?\\"],\\"dateModified\\":\\"2024-12-22T12:56:54.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"æå˜‰æ˜\\"}]}"]]},"headers":[],"readingTime":{"minutes":18.63,"words":5588},"git":{"updatedTime":1734872214000},"autoDesc":true,"filePathRelative":"1.å‰ç«¯/5.Node/rollupæ‰“åŒ…äº§ç‰©è§£æåŠåŸç†.md","categoryList":[{"id":"72e6d5","sort":1,"name":"å‰ç«¯"},{"id":"8ce9db","sort":5,"name":"Node"}],"bulletin":false}');export{a as comp,u as data};
